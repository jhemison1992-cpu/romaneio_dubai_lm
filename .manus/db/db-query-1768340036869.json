{
  "query": "\n-- Inserir 3 etapas para cada inspection_item_id existente\nINSERT INTO installation_steps (inspection_item_id, step_name, step_order, is_completed, completed_quantity)\nSELECT \n  ii.id,\n  'Instalação',\n  1,\n  0,\n  0\nFROM inspection_items ii\nWHERE NOT EXISTS (\n  SELECT 1 FROM installation_steps ist \n  WHERE ist.inspection_item_id = ii.id AND ist.step_order = 1\n);\n\nINSERT INTO installation_steps (inspection_item_id, step_name, step_order, is_completed, completed_quantity)\nSELECT \n  ii.id,\n  'Acabamento',\n  2,\n  0,\n  0\nFROM inspection_items ii\nWHERE NOT EXISTS (\n  SELECT 1 FROM installation_steps ist \n  WHERE ist.inspection_item_id = ii.id AND ist.step_order = 2\n);\n\nINSERT INTO installation_steps (inspection_item_id, step_name, step_order, is_completed, completed_quantity)\nSELECT \n  ii.id,\n  'Finalizado',\n  3,\n  0,\n  0\nFROM inspection_items ii\nWHERE NOT EXISTS (\n  SELECT 1 FROM installation_steps ist \n  WHERE ist.inspection_item_id = ii.id AND ist.step_order = 3\n);\n",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway03.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 2RJ6pkiYcWrkG7s.7677514b54b3 --database AdJ4NUusdiWEA7xpHs45nc --execute \n-- Inserir 3 etapas para cada inspection_item_id existente\nINSERT INTO installation_steps (inspection_item_id, step_name, step_order, is_completed, completed_quantity)\nSELECT \n  ii.id,\n  'Instalação',\n  1,\n  0,\n  0\nFROM inspection_items ii\nWHERE NOT EXISTS (\n  SELECT 1 FROM installation_steps ist \n  WHERE ist.inspection_item_id = ii.id AND ist.step_order = 1\n);\n\nINSERT INTO installation_steps (inspection_item_id, step_name, step_order, is_completed, completed_quantity)\nSELECT \n  ii.id,\n  'Acabamento',\n  2,\n  0,\n  0\nFROM inspection_items ii\nWHERE NOT EXISTS (\n  SELECT 1 FROM installation_steps ist \n  WHERE ist.inspection_item_id = ii.id AND ist.step_order = 2\n);\n\nINSERT INTO installation_steps (inspection_item_id, step_name, step_order, is_completed, completed_quantity)\nSELECT \n  ii.id,\n  'Finalizado',\n  3,\n  0,\n  0\nFROM inspection_items ii\nWHERE NOT EXISTS (\n  SELECT 1 FROM installation_steps ist \n  WHERE ist.inspection_item_id = ii.id AND ist.step_order = 3\n);\n",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 125
}