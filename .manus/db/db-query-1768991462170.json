{
  "query": "\nCREATE TABLE IF NOT EXISTS `pricing_plans` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `name` varchar(100) NOT NULL,\n  `slug` varchar(50) NOT NULL UNIQUE,\n  `description` text,\n  `monthly_price` int NOT NULL,\n  `annual_price` int NOT NULL,\n  `currency` varchar(3) NOT NULL DEFAULT 'USD',\n  `stripe_price_id_monthly` varchar(255),\n  `stripe_price_id_annual` varchar(255),\n  `max_projects` int,\n  `max_users` int,\n  `max_media_size` int,\n  `features` json,\n  `is_active` int NOT NULL DEFAULT 1,\n  `display_order` int NOT NULL DEFAULT 0,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `updatedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `slug` (`slug`)\n);\n\nCREATE TABLE IF NOT EXISTS `subscription_history` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `company_id` int NOT NULL,\n  `plan_id` int NOT NULL,\n  `billing_cycle` enum('monthly','annual') NOT NULL,\n  `previous_plan_id` int,\n  `change_reason` varchar(255),\n  `effective_date` timestamp NOT NULL,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  PRIMARY KEY (`id`),\n  KEY `company_id` (`company_id`),\n  KEY `plan_id` (`plan_id`),\n  KEY `previous_plan_id` (`previous_plan_id`),\n  CONSTRAINT `subscription_history_ibfk_1` FOREIGN KEY (`company_id`) REFERENCES `companies` (`id`) ON DELETE CASCADE,\n  CONSTRAINT `subscription_history_ibfk_2` FOREIGN KEY (`plan_id`) REFERENCES `pricing_plans` (`id`),\n  CONSTRAINT `subscription_history_ibfk_3` FOREIGN KEY (`previous_plan_id`) REFERENCES `pricing_plans` (`id`)\n);\n\nINSERT INTO `pricing_plans` (`name`, `slug`, `description`, `monthly_price`, `annual_price`, `currency`, `max_projects`, `max_users`, `max_media_size`, `features`, `is_active`, `display_order`)\nVALUES \n  ('Pro', 'pro', 'Perfeito para pequenas equipes de instalação', 4900, 49900, 'USD', 10, 20, 5000, '[\"Até 10 obras\", \"Até 20 usuários\", \"Suporte por email\", \"Relatórios em PDF\", \"Fotos e vídeos\"]', 1, 1),\n  ('Enterprise', 'enterprise', 'Solução completa para grandes operações', 19900, 203900, 'USD', NULL, NULL, NULL, '[\"Obras ilimitadas\", \"Usuários ilimitados\", \"Suporte prioritário\", \"API access\", \"Integrações customizadas\", \"Relatórios avançados\"]', 1, 2);\n",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway03.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 2RJ6pkiYcWrkG7s.7677514b54b3 --database AdJ4NUusdiWEA7xpHs45nc --execute \nCREATE TABLE IF NOT EXISTS `pricing_plans` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `name` varchar(100) NOT NULL,\n  `slug` varchar(50) NOT NULL UNIQUE,\n  `description` text,\n  `monthly_price` int NOT NULL,\n  `annual_price` int NOT NULL,\n  `currency` varchar(3) NOT NULL DEFAULT 'USD',\n  `stripe_price_id_monthly` varchar(255),\n  `stripe_price_id_annual` varchar(255),\n  `max_projects` int,\n  `max_users` int,\n  `max_media_size` int,\n  `features` json,\n  `is_active` int NOT NULL DEFAULT 1,\n  `display_order` int NOT NULL DEFAULT 0,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `updatedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `slug` (`slug`)\n);\n\nCREATE TABLE IF NOT EXISTS `subscription_history` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `company_id` int NOT NULL,\n  `plan_id` int NOT NULL,\n  `billing_cycle` enum('monthly','annual') NOT NULL,\n  `previous_plan_id` int,\n  `change_reason` varchar(255),\n  `effective_date` timestamp NOT NULL,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  PRIMARY KEY (`id`),\n  KEY `company_id` (`company_id`),\n  KEY `plan_id` (`plan_id`),\n  KEY `previous_plan_id` (`previous_plan_id`),\n  CONSTRAINT `subscription_history_ibfk_1` FOREIGN KEY (`company_id`) REFERENCES `companies` (`id`) ON DELETE CASCADE,\n  CONSTRAINT `subscription_history_ibfk_2` FOREIGN KEY (`plan_id`) REFERENCES `pricing_plans` (`id`),\n  CONSTRAINT `subscription_history_ibfk_3` FOREIGN KEY (`previous_plan_id`) REFERENCES `pricing_plans` (`id`)\n);\n\nINSERT INTO `pricing_plans` (`name`, `slug`, `description`, `monthly_price`, `annual_price`, `currency`, `max_projects`, `max_users`, `max_media_size`, `features`, `is_active`, `display_order`)\nVALUES \n  ('Pro', 'pro', 'Perfeito para pequenas equipes de instalação', 4900, 49900, 'USD', 10, 20, 5000, '[\"Até 10 obras\", \"Até 20 usuários\", \"Suporte por email\", \"Relatórios em PDF\", \"Fotos e vídeos\"]', 1, 1),\n  ('Enterprise', 'enterprise', 'Solução completa para grandes operações', 19900, 203900, 'USD', NULL, NULL, NULL, '[\"Obras ilimitadas\", \"Usuários ilimitados\", \"Suporte prioritário\", \"API access\", \"Integrações customizadas\", \"Relatórios avançados\"]', 1, 2);\n",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 976
}