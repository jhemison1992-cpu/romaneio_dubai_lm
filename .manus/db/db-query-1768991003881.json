{
  "query": "\nCREATE TABLE IF NOT EXISTS `companies` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `name` varchar(255) NOT NULL,\n  `slug` varchar(100) NOT NULL UNIQUE,\n  `logo_url` varchar(1000),\n  `subscription_plan` enum('free','pro','enterprise') NOT NULL DEFAULT 'free',\n  `subscription_status` enum('active','paused','cancelled') NOT NULL DEFAULT 'active',\n  `subscription_end_date` timestamp,\n  `stripe_customer_id` varchar(255),\n  `stripe_subscription_id` varchar(255),\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `updatedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `slug_unique` (`slug`)\n);\n\nCREATE TABLE IF NOT EXISTS `company_users` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `company_id` int NOT NULL,\n  `user_id` int NOT NULL,\n  `role` enum('admin','supervisor','technician','viewer') NOT NULL DEFAULT 'viewer',\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `updatedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  PRIMARY KEY (`id`),\n  FOREIGN KEY (`company_id`) REFERENCES `companies`(`id`) ON DELETE CASCADE,\n  FOREIGN KEY (`user_id`) REFERENCES `users`(`id`) ON DELETE CASCADE\n);\n\nCREATE TABLE IF NOT EXISTS `invoices` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `company_id` int NOT NULL,\n  `stripe_invoice_id` varchar(255) UNIQUE,\n  `amount` int NOT NULL,\n  `currency` varchar(3) NOT NULL DEFAULT 'USD',\n  `status` enum('draft','open','paid','void','uncollectible') NOT NULL DEFAULT 'draft',\n  `paid_at` timestamp,\n  `due_date` timestamp,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `updatedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  PRIMARY KEY (`id`),\n  FOREIGN KEY (`company_id`) REFERENCES `companies`(`id`) ON DELETE CASCADE\n);\n",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway03.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 2RJ6pkiYcWrkG7s.7677514b54b3 --database AdJ4NUusdiWEA7xpHs45nc --execute \nCREATE TABLE IF NOT EXISTS `companies` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `name` varchar(255) NOT NULL,\n  `slug` varchar(100) NOT NULL UNIQUE,\n  `logo_url` varchar(1000),\n  `subscription_plan` enum('free','pro','enterprise') NOT NULL DEFAULT 'free',\n  `subscription_status` enum('active','paused','cancelled') NOT NULL DEFAULT 'active',\n  `subscription_end_date` timestamp,\n  `stripe_customer_id` varchar(255),\n  `stripe_subscription_id` varchar(255),\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `updatedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  PRIMARY KEY (`id`),\n  UNIQUE KEY `slug_unique` (`slug`)\n);\n\nCREATE TABLE IF NOT EXISTS `company_users` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `company_id` int NOT NULL,\n  `user_id` int NOT NULL,\n  `role` enum('admin','supervisor','technician','viewer') NOT NULL DEFAULT 'viewer',\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `updatedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  PRIMARY KEY (`id`),\n  FOREIGN KEY (`company_id`) REFERENCES `companies`(`id`) ON DELETE CASCADE,\n  FOREIGN KEY (`user_id`) REFERENCES `users`(`id`) ON DELETE CASCADE\n);\n\nCREATE TABLE IF NOT EXISTS `invoices` (\n  `id` int AUTO_INCREMENT NOT NULL,\n  `company_id` int NOT NULL,\n  `stripe_invoice_id` varchar(255) UNIQUE,\n  `amount` int NOT NULL,\n  `currency` varchar(3) NOT NULL DEFAULT 'USD',\n  `status` enum('draft','open','paid','void','uncollectible') NOT NULL DEFAULT 'draft',\n  `paid_at` timestamp,\n  `due_date` timestamp,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  `updatedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  PRIMARY KEY (`id`),\n  FOREIGN KEY (`company_id`) REFERENCES `companies`(`id`) ON DELETE CASCADE\n);\n",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 615
}