{
  "query": "\n-- Primeiro, vamos ver quais etapas vamos manter (as 3 primeiras de cada inspection_item_id)\nDELETE FROM installation_steps \nWHERE id NOT IN (\n  SELECT id FROM (\n    SELECT id, \n           ROW_NUMBER() OVER (PARTITION BY inspection_item_id ORDER BY step_order, id) as rn\n    FROM installation_steps\n  ) tmp\n  WHERE rn <= 3\n);\n",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway03.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 2RJ6pkiYcWrkG7s.7677514b54b3 --database AdJ4NUusdiWEA7xpHs45nc --execute \n-- Primeiro, vamos ver quais etapas vamos manter (as 3 primeiras de cada inspection_item_id)\nDELETE FROM installation_steps \nWHERE id NOT IN (\n  SELECT id FROM (\n    SELECT id, \n           ROW_NUMBER() OVER (PARTITION BY inspection_item_id ORDER BY step_order, id) as rn\n    FROM installation_steps\n  ) tmp\n  WHERE rn <= 3\n);\n",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 57
}